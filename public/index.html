<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Hello World</title>
</head>

<body>
<div class="data"><h1>Loading...</h1></div>

<button id="increase">Increase</button>
<button id="decrease">Decrease</button>

<script src="libraries/p5.min.js"></script>
<script>
    const pressed = document.querySelector('.data')
    const connections = document.querySelector('.connections')

    const inc = document.getElementById('increase')
    const dec = document.getElementById('decrease')

    let ws = new WebSocket('wss://aispawn.herokuapp.com/ws')
    // let ws = new WebSocket('ws://localhost:3000/ws')

    //update websocket
    const updateData = ({data}) => {
        const {presses} = JSON.parse(data)
        const {connections} = JSON.parse(data)

        let template = `
            <h1>Num Presses: ${presses}</h1>
            <h1>Current Connections: ${connections}</h1>
               `;

        pressed.innerHTML = template
    }
    ws.addEventListener('message', updateData)

    //tell server
    const up = () => {
        ws.send('up')
    }
    const down = () => {
        ws.send('down')
    }
    inc.addEventListener('click', up)
    dec.addEventListener('click', down)
</script>
</body>
</html>